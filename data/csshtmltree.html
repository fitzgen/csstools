<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <link rel="stylesheet" type="text/css" href="csshtmltree.css" />
</head>
<body role="application">

<!-- The output from #templateRoot (below) is inserted here. -->
<div id="root">Hello
</div>

<!--
To visually debug the templates without running firefox, alter the display:none
-->
<div style="display:none;">
  <!--
  templateRoot sits at the top of the window showing what we're looking at.
  For data it needs an instance of CssHtmlTree from which it gets styleGroups
  -->
  <div id="templateRoot">
    <div _id="groups">
      <div foreach="group in ${styleGroups}" class="group" open="false"
            save="${group.element}">
        <h1 onclick="${group.click}">${group.localName}</h1>
        <div save="${group.properties}"></div>
      </div>
    </div>
  </div>

  <!--
  A templateProperties sits inside each templateGroups to show the properties
  themselves. Each needs data like this:
  {
    property: [ ..., ] // Array of PropertyViews from csshtmltree.js
  }
  -->
  <div id="templateProperties">
    <div foreach="property in ${propertyViews}" class="property-view"
        open="false" save="${property.element}">
      <div class="clearfix property-header" onclick="${property.click}">
        <span class="property-name">
          <!-- TODO: the title probably needs l10n work -->
          <a class="link" target="_blank" href="${property.link}"
              title="Read the docs for this property">${property.name}</a>
        </span>
        <span class="property-value">${property.value}</span>
        <span class="link">${property.ruleTitle(__element)}</span>
      </div>
      <table class="rules" save="${property.rules}"></table>
    </div>
  </div>

  <!--
  A templateRules sits inside each templateProperties showing the list of rules
  that affect that property. Each needs data like this:
  {
    selectorViews: ..., // from cssLogic.getPropertyInfo(x).[un]matchedSelectors
    statusText: function(status) {}, // convert rule.status to readable text
    showUnmatchedRules: true / false, // show a "more unmatched rules" link
    showUnmatchedRulesClick: function() {}, // click event handler for the
        "show more unmatched rules"
  }
  This is a template so the parent does not need to be a table, except that
  using a div a the parent causes the DOM to muck with the tr elements
  -->
  <table id="templateRules">
    <tr foreach="selector in ${selectorViews}"
        if="${selector.selectorInfo.sheetAllowed}">
      <td class="rule-text status${selector.selectorInfo.status}">
        ${selector.text(__element)}
      </td>
      <td class="rule-value">${selector.selectorInfo.value}</td>
      <td class="rule-link">
        <a target="_blank" title="${selector.selectorInfo.href}"
            href="view-source:${selector.selectorInfo.href}"
            class="link">${selector.selectorInfo.source}</a>
      </td>
    </tr>
    <tr if="${showUnmatchedLink}">
      <td colspan="4">
        <a href="#" onclick="${showUnmatchedLinkClick}"
            class="link">${showUnmatchedLinkText}</a>
      </td>
    </tr>
  </table>
</div>

</body>
</html>

